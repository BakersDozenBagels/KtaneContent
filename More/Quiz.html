<html>
<head>
    <script>
        let everything = {
            'General': {
                'Semaphores': {
                    'CSS': 'semaphores',
                    'RandomizeRight': true,
                    'Groups': [ 'letters', 'images' ],
                    'Items': [
                        [
                            [ 'A', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Alpha.svg" />' ],
                            [ 'B', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Bravo.svg" />' ],
                            [ 'C', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Charlie.svg" />' ],
                            [ 'D', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Delta.svg" />' ],
                            [ 'E', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Echo.svg" />' ],
                            [ 'F', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Foxtrot.svg" />' ],
                            [ 'G', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Golf.svg" />' ],
                            [ 'H', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Hotel.svg" />' ],
                            [ 'I', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_India.svg" />' ],
                            [ 'J', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Juliet.svg" />' ],
                            [ 'K', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Kilo.svg" />' ],
                            [ 'L', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Lima.svg" />' ],
                            [ 'M', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Mike.svg" />' ],
                            [ 'N', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_November.svg" />' ],
                            [ 'O', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Oscar.svg" />' ],
                            [ 'P', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Papa.svg" />' ],
                            [ 'Q', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Quebec.svg" />' ],
                            [ 'R', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Romeo.svg" />' ],
                            [ 'S', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Sierra.svg" />' ],
                            [ 'T', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Tango.svg" />' ],
                            [ 'U', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Uniform.svg" />' ],
                            [ 'V', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Victor.svg" />' ],
                            [ 'W', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Whiskey.svg" />' ],
                            [ 'X', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_X-ray.svg" />' ],
                            [ 'Y', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Yankee.svg" />' ],
                            [ 'Z', '<img src="https://ktane.timwi.de/HTML/img/Semaphore/Semaphore_Zulu.svg" />' ]
                        ]
                    ]
                },
                'Morse Code': {
                    'CSS': 'morse',
                    'RandomizeRight': true,
                    'Groups': [ 'letters', 'Morse code' ],
                    'Items': [
                        [
                            [ 'A', '.-' ],
                            [ 'B', '-...' ],
                            [ 'C', '-.-.' ],
                            [ 'D', '-..' ],
                            [ 'E', '.' ],
                            [ 'F', '..-.' ],
                            [ 'G', '--.' ],
                            [ 'H', '....' ],
                            [ 'I', '..' ],
                            [ 'J', '.---' ],
                            [ 'K', '-.-' ],
                            [ 'L', '.-..' ],
                            [ 'M', '--' ],
                            [ 'N', '-.' ],
                            [ 'O', '---' ],
                            [ 'P', '.--.' ],
                            [ 'Q', '--.-' ],
                            [ 'R', '.-.' ],
                            [ 'S', '...' ],
                            [ 'T', '-' ],
                            [ 'U', '..-' ],
                            [ 'V', '...-' ],
                            [ 'W', '.--' ],
                            [ 'X', '-..-' ],
                            [ 'Y', '-.--' ],
                            [ 'Z', '--..' ],
                            [ '0', '-----' ],
                            [ '1', '.----' ],
                            [ '2', '..---' ],
                            [ '3', '...--' ],
                            [ '4', '....-' ],
                            [ '5', '.....' ],
                            [ '6', '-....' ],
                            [ '7', '--...' ],
                            [ '8', '---..' ],
                            [ '9', '----.' ]
                        ]
                    ]
                },
                'Zoni': {
                    'CSS': 'zoni',
                    'RandomizeRight': true,
                    'Groups': [ 'letters', 'Zoni' ],
                    'Items': [
                        [
                            [ 'A', 'A' ],
                            [ 'B', 'B' ],
                            [ 'C', 'C' ],
                            [ 'D', 'D' ],
                            [ 'E', 'E' ],
                            [ 'F', 'F' ],
                            [ 'G', 'G' ],
                            [ 'H', 'H' ],
                            [ 'I', 'I' ],
                            [ 'J', 'J' ],
                            [ 'K', 'K' ],
                            [ 'L', 'L' ],
                            [ 'M', 'M' ],
                            [ 'N', 'N' ],
                            [ 'O', 'O' ],
                            [ 'P', 'P' ],
                            [ 'Q', 'Q' ],
                            [ 'R', 'R' ],
                            [ 'S', 'S' ],
                            [ 'T', 'T' ],
                            [ 'U', 'U' ],
                            [ 'V', 'V' ],
                            [ 'W', 'W' ],
                            [ 'X', 'X' ],
                            [ 'Y', 'Y' ],
                            [ 'Z', 'Z' ]
                        ]
                    ]
                },
            },
            'Skyrim': {
                'Cities': {
                    'CSS': 'skyrim',
                    'RandomizeRight': true,
                    'Groups': [ 'names', 'images' ],
                    'Items': [
                        [
                            [ 'Dawnstar', '<img src="../HTML/img/Skyrim/Color/Cities/Dawnstar.png" />' ],
                            [ 'Ivarstead', '<img src="../HTML/img/Skyrim/Color/Cities/Ivarstead.png" />' ],
                            [ 'Markarth', '<img src="../HTML/img/Skyrim/Color/Cities/Markarth.png" />' ],
                            [ 'Riverwood', '<img src="../HTML/img/Skyrim/Color/Cities/Riverwood.png" />' ],
                            [ 'Rorikstead', '<img src="../HTML/img/Skyrim/Color/Cities/Rorikstead.png" />' ],
                            [ 'Solitude', '<img src="../HTML/img/Skyrim/Color/Cities/Solitude.png" />' ],
                            [ 'Whiterun', '<img src="../HTML/img/Skyrim/Color/Cities/Whiterun.png" />' ],
                            [ 'Windhelm', '<img src="../HTML/img/Skyrim/Color/Cities/Windhelm.png" />' ],
                            [ 'Winterhold', '<img src="../HTML/img/Skyrim/Color/Cities/Winterhold.png" />' ]
                        ]
                    ]
                },
                'Enemies': {
                    'CSS': 'skyrim',
                    'RandomizeRight': true,
                    'Groups': [ 'names', 'images' ],
                    'Items': [
                        [
                            [ 'Alduin', '<img src="../HTML/img/Skyrim/Color/Enemies/Alduin.png" />' ],
                            [ 'Blood Dragon', '<img src="../HTML/img/Skyrim/Color/Enemies/Blood Dragon.png" />' ],
                            [ 'Cave Bear', '<img src="../HTML/img/Skyrim/Color/Enemies/Cave Bear.png" />' ],
                            [ 'Dragon Priest', '<img src="../HTML/img/Skyrim/Color/Enemies/Dragon Priest.png" />' ],
                            [ 'Draugr', '<img src="../HTML/img/Skyrim/Color/Enemies/Draugr.png" />' ],
                            [ 'Draugr Overlord', '<img src="../HTML/img/Skyrim/Color/Enemies/Draugr Overlord.png" />' ],
                            [ 'Frost Troll', '<img src="../HTML/img/Skyrim/Color/Enemies/Frost Troll.png" />' ],
                            [ 'Frostbite Spider', '<img src="../HTML/img/Skyrim/Color/Enemies/Frostbite Spider.png" />' ],
                            [ 'Mudcrab', '<img src="../HTML/img/Skyrim/Color/Enemies/Mudcrab.png" />' ]
                        ]
                    ]
                },
                'Races': {
                    'CSS': 'skyrim',
                    'RandomizeRight': true,
                    'Groups': [ 'names', 'images' ],
                    'Items': [
                        [
                            [ 'Altmer', '<img src="../HTML/img/Skyrim/Color/Races/Altmer.png" />' ],
                            [ 'Argonian', '<img src="../HTML/img/Skyrim/Color/Races/Argonian.png" />' ],
                            [ 'Breton', '<img src="../HTML/img/Skyrim/Color/Races/Breton.png" />' ],
                            [ 'Dunmer', '<img src="../HTML/img/Skyrim/Color/Races/Dunmer.png" />' ],
                            [ 'Imperial', '<img src="../HTML/img/Skyrim/Color/Races/Imperial.png" />' ],
                            [ 'Khajiit', '<img src="../HTML/img/Skyrim/Color/Races/Khajiit.png" />' ],
                            [ 'Nord', '<img src="../HTML/img/Skyrim/Color/Races/Nord.png" />' ],
                            [ 'Orc', '<img src="../HTML/img/Skyrim/Color/Races/Orc.png" />' ],
                            [ 'Redguard', '<img src="../HTML/img/Skyrim/Color/Races/Redguard.png" />' ]
                        ]
                    ]
                },
                'Weapons': {
                    'CSS': 'skyrim',
                    'RandomizeRight': true,
                    'Groups': [ 'names', 'images' ],
                    'Items': [
                        [
                            [ 'Axe of Whiterun', '<img src="../HTML/img/Skyrim/Color/Weapons/Axe of Whiterun.png" />' ],
                            [ 'Blade of Woe', '<img src="../HTML/img/Skyrim/Color/Weapons/Blade of Woe.png" />' ],
                            [ 'Bow of the Hunt', '<img src="../HTML/img/Skyrim/Color/Weapons/Bow of the Hunt.png" />' ],
                            [ 'Chillrend', '<img src="../HTML/img/Skyrim/Color/Weapons/Chillrend.png" />' ],
                            [ 'Dawnbreaker', '<img src="../HTML/img/Skyrim/Color/Weapons/Dawnbreaker.png" />' ],
                            [ 'Firiniel’s End', '<img src="../HTML/img/Skyrim/Color/Weapons/Firiniel%27s End.png" />' ],
                            [ 'Mace of Molag Bal', '<img src="../HTML/img/Skyrim/Color/Weapons/Mace of Molag Bal.png" />' ],
                            [ 'Volendrung', '<img src="../HTML/img/Skyrim/Color/Weapons/Volendrung.png" />' ],
                            [ 'Windshear', '<img src="../HTML/img/Skyrim/Color/Weapons/Windshear.png" />' ]
                        ]
                    ]
                }
            },
        };

        let timeout;
        let mode = 2;

        function showMenuScreen() {
            clearTimeout(timeout);
            timeout = null;

            document.getElementById('quiz').innerHTML = `
                <h1>PRACTICE<${''}/h1>
                ${Object.keys(everything).map(category => `
                    <h2>${category}<${''}/h2>
                    <menu>
                      ${Object.keys(everything[category]).map(thing => `
                          <a href='#' class='start' data-cat='${category}' data-thing='${thing}'><li>${thing}<${''}/li><${''}/a>
                      `).join('')}
                    <${''}/menu>
                `).join('')}
            `;

            Array.from(document.querySelectorAll('a.start')).forEach(a => {
                a.onclick = function() { startQuiz(a.dataset.thing, everything[a.dataset.cat][a.dataset.thing]); return false; };
            });
        }

        function startQuiz(thing, inf)
        {
            mode = 2;
            let itemGroups = inf.Items;
            let numTotalItems = itemGroups.reduce((p, n) => p + n.length, 0);

            document.getElementById('quiz').innerHTML = `
                <h1 id='header'>${thing}<${''}/h1>
                <div id='challenge'><${''}/div>
                <div id='answers'><${''}/div>
                <button id='back-button'>&lt; Back<${''}/button>
                <button id='mode-button'><${''}/button>
            `;
            document.getElementById('quiz').className = inf.CSS;

            function updateModeButton() {
                document.getElementById('mode-button').innerHTML = mode === 2 ? 'Display both' : `Display only ${inf.Groups[mode]}`;
            }
            updateModeButton();

            function showQuestion()
            {
                clearTimeout(timeout);
                timeout = null;
                let itemIx = (Math.random() * numTotalItems) | 0;
                let groupIx = 0;
                while (itemIx > itemGroups[groupIx].length) {
                    itemIx -= itemGroups[groupIx].length;
                    groupIx++;
                }
                let item = itemGroups[groupIx][itemIx];
                let first = mode < 2 ? (1 - mode) : ((Math.random() * 2) | 0);

                document.getElementById('challenge').innerHTML = item [ first ? 0 : 1 ];

                let answers = itemGroups[groupIx].map((item, ix) => ({ correct: ix === itemIx, item: item [ first ? 1 : 0 ] }));

                if (first ? inf.RandomizeRight : inf.RandomizeLeft)
                    for (let i = answers.length - 1; i > 0; i--) {
                        let j = (Math.random() * (i + 1)) | 0;
                        let temp = answers[i];
                        answers[i] = answers[j];
                        answers[j] = temp;
                    }

                document.getElementById('answers').innerHTML = answers
                    .map(answ => `<button${answ.correct ? ' data-correct="1" class="correct-answer"' : ''}>${answ.item}<${''}/button> `)
                    .join('');
                Array.from(document.getElementById('answers').querySelectorAll('button')).forEach(btn => {
                    btn.onclick = function() {
                        if (timeout) {
                            return false;
                        }
                        if (btn.dataset.correct) {
                            btn.classList.add('correct');
                            timeout = setTimeout(showQuestion, 700);
                        } else {
                            btn.classList.add('wrong');
                            document.getElementById('answers').querySelector('button.correct-answer').classList.add('correct');
                            timeout = setTimeout(showQuestion, 1500);
                        }
                        return false;
                    };
                });

                document.getElementById('challenge').className = first ? 'left' : 'right';
                document.getElementById('answers').className = first ? 'right' : 'left';
            }
            showQuestion();

            document.getElementById('back-button').addEventListener('click', showMenuScreen);
            document.getElementById('mode-button').addEventListener('click', () => {
                mode = (mode + 1) % 3;
                updateModeButton();
                showQuestion();
            });
        }

        window.addEventListener('load', showMenuScreen);
    </script>
    <link rel="stylesheet" type="text/css" href="../HTML/css/font.css">
    <style>
        * {
            text-align: center;
            box-sizing: border-box;
        }

        body {
            max-width: 21cm;
            margin: 0 auto;
            font-family: 'Trebuchet MS', sans-serif;
            background: #080812;
            color: #eef;
        }

        button {
            font: inherit;
            color: inherit;
        }

        button.correct {
            box-shadow: 0 0 .2cm .1cm #0f0;
        }
        button.wrong {
            box-shadow: 0 0 .2cm .1cm #f00;
        }

        #challenge {
            font-size: 128pt;
            margin-bottom: 1cm;
            background: #04a;
        }

        #back-button {
            position: fixed;
            left: .4cm;
            bottom: .2cm;
        }

        #mode-button {
            position: fixed;
            right: .4cm;
            bottom: .2cm;
        }

        h1 {
            font-size: 64pt;
            border-bottom: 1px solid #88f;
        }
        h2 {
            background: #228;
            padding: .2cm 0;
            margin: 2cm 0 .4cm;
        }
        menu {
            list-style-type: none;
            padding: 0;
            font-size: 32pt;
            margin: 0;
        }
        menu li, button {
            border: 1px solid #888;
            border-radius: .1cm;
            padding: .2cm .6cm;
            display: inline-block;
            background: black;
            box-shadow: 0 0 .25cm rgba(255, 255, 255, .3);
            text-decoration: none;
            background: #04a;
            color: #ccf;
            margin: .2cm 0;
        }
            menu li:hover, button:not(.wrong):not(.correct):hover {
                background: #99f;
                color: white;
                box-shadow: 0 0 .25cm rgba(255, 255, 255, 1);
            }

        .morse #answers { font-size: 32pt; }

        .semaphores #answers { font-size: 32pt; }
        .semaphores #answers button { background: #04a; }
        .semaphores #answers img { width: 2cm; }
        .semaphores #challenge img { width: 10cm; margin: .25cm 0; }

        .zoni #answers { font-size: 32pt; }
        .zoni #challenge.right { font-family: 'Zoni'; font-size: 100pt; line-height: 165pt; }
        .zoni #answers.right { font-family: 'Zoni'; }

        .skyrim #challenge { font-size: 64pt; }
        .skyrim #challenge.right { background: none; }
        .skyrim #challenge img { height: 10cm; }
        .skyrim #answers { font-size: 16pt; }
        .skyrim #answers.right button { background: none; }
        .skyrim #answers img { height: 4.4cm; }

    </style>
</head>
<body>
    <div id='quiz'></div>
</body>
</html>
