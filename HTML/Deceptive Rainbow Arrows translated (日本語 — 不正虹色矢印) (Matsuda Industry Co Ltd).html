<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>不正虹色矢印 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        table:not(.skip) {
            margin-top: 1em;
            margin-bottom: 1em;
            font-size: 0.875em;
        }

        table .inner-table {
            float: right;
            margin: 1em;
            font-size: 0.9em;
        }
        .dark table, table { border: none; }
        td {
            text-align: center;
        }
        .continued {
            text-align: right;
            font-style: italic;
            font-size: 10pt;
        }
        .squeeze {
            margin-top: auto;
            margin-bottom: auto;
        }
        .wide {
            width: 100%;
        }
        .bigger {
            font-size: 150%;
        }
        .page {
            background-repeat: repeat-y;
            background-position: top;
        }
        body:not(.dark) .page-bg-cst-2bits {
            background-image: url("img/Deceptive Rainbow Arrows/page-bg-cst-twobits.png");
        }
        body.dark .page-bg-cst-2bits {
            background-image: url("img/Deceptive Rainbow Arrows/page-bg-cst-twobits-dark.png");
        }
        body:not(.dark) .page-bg-cst-bh {
            background-image: url("img/Deceptive Rainbow Arrows/page-bg-cst-blackhole.png");
        }
        body.dark .page-bg-cst-bh {
            background-image: url("img/Deceptive Rainbow Arrows/page-bg-cst-blackhole-dark.png");
        }
        body:not(.dark) .page-bg-cst-storegbra {
            background-image: url("img/Deceptive Rainbow Arrows/page-bg-cst-storesgbra.png");
        }
        body.dark .page-bg-cst-storegbra {
            background-image: url("img/Deceptive Rainbow Arrows/page-bg-cst-storesgbra-dark.png");
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">不正虹色矢印</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Deceptive Rainbow Arrows.svg" class="diagram">
                <h2>モジュール詳細：不正虹色矢印</h2>
                <p class="flavour-text">「反転貯留ポイントの計算にポイントする」ってどういうこと！？ブラックホールや無駄なツービッツをポイントしているんだけど！</p>
                <p>このモジュールには、虹色がランダムに配置された8つの矢印ボタンと、中央には00から77までの八進数を表示するディスプレーがある。モジュールが表示可能である色は、赤(Red)、オレンジ(Orange)、黄(Yellow)、緑(Green)、青(Blue)、紫(Purple)、白(White)、黒(Black)の8色である。未送信時には6セットの矢印のシーケンスが点滅し、その後に文字が別の色に点滅して、矢印の点滅シーケンスの終わりを示す。</p>
                <p><strong>黒い矢印がない場合、そのモジュールは「<a href="Rainbow%20Arrows%20translated%20(日本語%20—%20虹色矢印)%20(hatosable).html">虹色矢印(Rainbow Arrows)</a>」の可能性がある。</strong></p>
                <p>モジュールを解除するには、処理担当者が2色のクエリを行い、モジュールに表示される応答を読み取る必要がある。表示される応答は、モジュール上では 「R:##」として八進数で表示される。各応答に対して、次の色のシーケンスをクエリする手順を実行する。処理担当者が3回目のクエリを行った後、そのクエリの応答に基づいて送信する値を決定する。</p>
                <p>モジュールのクエリを行うには、2つの矢印の色を押し、次にディスプレーを押して応答を受け取る。モジュールの送信を行うには、矢印が押されていない状態でディスプレーを押し、2つの矢印の色を順番に押し、再びディスプレーを押す。処理担当者が送信をやめたい場合、矢印が入力されていない状態でディスプレーを押す。<strong>1色だけ選択してクエリ・送信することや、モジュールがクエリを処理している間に操作することは、絶対にしてはならない。これを行うとミスが記録され、初期状態に戻るまでの数秒間、モジュールにエラーメッセージを表示する。</strong></p>
                <h1>このマニュアルの目次</h1>
                <ul>
                    <li><h2 class="squeeze"><a href="#firstQ">1回目のクエリ</a></h2></li>
                    <li><h2 class="squeeze"><a href="#secondQ">2回目のクエリ</a></h2></li>
                    <li><h2 class="squeeze"><a href="#thirdQ">3回目のクエリ</a></h2></li>
                    <li><h2 class="squeeze"><a href="#submitR">回答の送信</a></h2></li>
                </ul>
            </div>
            <div class="page-footer relative-footer">ページ 1/5</div>
        </div>
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">不正虹色矢印</span>
            </div>
            <div class="page-content">
                <h2 id="firstQ">1回目のクエリ</h2>
                <p>1回目のクエリを得るには、シリアルナンバーから3つの値のペアを作成する。1番目と2番目、3番目と4番目、5番目と6番目をペアとし、英字をA1Z26で数字に変換する。それぞれのペアの和をとり、それらすべての数を8で割った余りを求め、3つの別々の値を得る。この3つの値をそれぞれZ、Y、Xと呼ぶ。</p>
                <p>以下の表からZを表す段を見つけ、八進数の値0～7を順に表す一連の色の配置を得る。この段は後のクエリに使用される。</p>
                <p>爆弾のバッテリーの数が偶数である場合、Yを表す色がクエリするペアの最初の色となり、Xを表す色が2番目の色となる。</p>
                <p>そうでない場合、Xを表す色がクエリするペアの最初の色となり、Yを表す色が2番目の色となる。</p>
                <p>表のそれぞれのセルでは、青との混同を避けるために黒を「K」で表していること以外は、各文字が色の英語名の最初の文字で表されている。</p>
                <table class="skip wide bigger">
                    <tr>
                        <th rowspan="2">Z</th>
                        <th colspan="8">色で表される八進数</th>
                    </tr>
                    <tr><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th></tr>
                    <tr><th>0</th><td>R</td><td>K</td><td>Y</td><td>W</td><td>O</td><td>G</td><td>P</td><td>B</td></tr>
                    <tr><th>1</th><td>Y</td><td>O</td><td>B</td><td>G</td><td>R</td><td>K</td><td>W</td><td>P</td></tr>
                    <tr><th>2</th><td>B</td><td>Y</td><td>K</td><td>R</td><td>W</td><td>P</td><td>G</td><td>O</td></tr>
                    <tr><th>3</th><td>G</td><td>R</td><td>P</td><td>O</td><td>K</td><td>W</td><td>B</td><td>Y</td></tr>
                    <tr><th>4</th><td>P</td><td>B</td><td>G</td><td>K</td><td>Y</td><td>R</td><td>O</td><td>W</td></tr>
                    <tr><th>5</th><td>K</td><td>W</td><td>O</td><td>B</td><td>P</td><td>Y</td><td>R</td><td>G</td></tr>
                    <tr><th>6</th><td>W</td><td>G</td><td>R</td><td>P</td><td>B</td><td>O</td><td>Y</td><td>K</td></tr>
                    <tr><th>7</th><td>O</td><td>P</td><td>W</td><td>Y</td><td>G</td><td>B</td><td>K</td><td>R</td></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 2/5</div>
        </div>
        <div class="page page-bg-cst-2bits">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">不正虹色矢印</span>
            </div>
            <div class="page-content">
                <h2 id="secondQ">2回目のクエリ</h2>
                <p>点滅する矢印のシーケンスを6桁の二進数の文字列に変換する。二進数の最初の桁は、ディスプレーの文字が点滅した後に点滅する最初の矢印のセットで表す。白と黒は決して、矢印のシーケンスで点滅することはないため、点滅セットが反転しているかどうかを判断する際、考慮してはいけない。1つの色付き矢印を除くすべての矢印が点滅している場合、その桁は1として表され、そうでない場合、0として表される。</p>
                <p>以下の表を使用して、最初のクエリからの応答を八進数から二進数に変換する。これを別の二進数の文字列として作成する。</p>
                <table>
                    <tr><th>八進数</th><th>二進数</th><th>八進数</th><th>二進数</th><th>八進数</th><th>二進数</th><th>八進数</th><th>二進数</th><th>八進数</th><th>二進数</th><th>八進数</th><th>二進数</th><th>八進数</th><th>二進数</th><th>八進数</th><th>二進数</th></tr>
                    <tr><td>0</td><td>000</td><td>1</td><td>001</td><td>2</td><td>010</td><td>3</td><td>011</td><td>4</td><td>100</td><td>5</td><td>101</td><td>6</td><td>110</td><td>7</td><td>111</td></tr>
                </table>
                <p>先ほど得られた2つの二進数の文字列に対してXOR演算を行い、新しい一つの二進数を得る。その二進数から2桁目、4桁目、6桁目を取り出し、3桁の二進数を1つ作り、余ったものを使用して、2つ目の3桁の二進数を作る。この2つの3桁の二進数を八進数に変換し、2つの八進数を1つの八進数の値に結合し、以下の表を相互参照して新しい八進数の値を得る。1回目のクエリで使用した色の配置を再び参照して、新しい八進数の値をクエリする。</p>
                <table class="skip bigger centered" style="border-collapse: separate; border-style: none">
                    <tr><td class="corner"></td><th>_0</th><th>_1</th><th>_2</th><th>_3</th><th>_4</th><th>_5</th><th>_6</th><th>_7</th></tr>
                    <tr><th>0_</th><td>36</td><td>02</td><td>70</td><td>74</td><td>57</td><td>32</td><td>24</td><td>22</td></tr>
                    <tr><th>1_</th><td>40</td><td>30</td><td>06</td><td>17</td><td>64</td><td>34</td><td>51</td><td>47</td></tr>
                    <tr><th>2_</th><td>63</td><td>53</td><td>45</td><td>54</td><td>10</td><td>61</td><td>60</td><td>41</td></tr>
                    <tr><th>3_</th><td>67</td><td>07</td><td>00</td><td>42</td><td>04</td><td>56</td><td>46</td><td>65</td></tr>
                    <tr><th>4_</th><td>16</td><td>62</td><td>77</td><td>26</td><td>31</td><td>12</td><td>66</td><td>25</td></tr>
                    <tr><th>5_</th><td>55</td><td>52</td><td>11</td><td>14</td><td>27</td><td>05</td><td>35</td><td>76</td></tr>
                    <tr><th>6_</th><td>15</td><td>50</td><td>37</td><td>23</td><td>44</td><td>33</td><td>43</td><td>73</td></tr>
                    <tr><th>7_</th><td>75</td><td>72</td><td>03</td><td>21</td><td>20</td><td>13</td><td>71</td><td>01</td></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 3/5</div>
        </div>
        <div class="page page-bg-cst-bh">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">不正虹色矢印</span>
            </div>
            <div class="page-content">
                <h2 id="thirdQ">3回目のクエリ</h2>
                <p class="squeeze">2回目のクエリで得られた応答を使用し、以下のグリッドに基づき、読み順でその位置にある座標から開始する。00はグリッドの最も左上である。グリッド上で、モジュールにある白の矢印と同じ方向を向いて開始する。以下の疑似コード取得手順を実行する。</p>
                <ol class="squeeze">
                    <li><code>I = 0</code>、<code>P</code>を「空のリスト」、Mを白い矢印からディスプレーの文字が点滅したときの色と一致する矢印まで時計回りに数えたときの矢印の数とする。(例:時計回りの順番で、色の並びがW、G、B、R、K、Y、O、Pのとき、点滅する文字の色が青の場合、Mは2となる。)</li>
                    <li><code>I &lt; 4</code>である間、以下のステップを繰り返す。
                        <ol class="squeeze">
                            <li><code>E</code>を別の「空のリスト」とし、ここでは<code>A = 0</code>とする。</li>
                            <li><code>A &lt; I + 1</code>である間、以下のステップを繰り返す。<ol class="squeeze">
                                <li>今いる値を<code>E</code>に追加する。</li>
                                <li>現在の方向に1つ移動し、枠外に移動する場合はグリッドの反対側にループする。</li>
                                <li>Aに1を加算する。</li>
                            </ol></li>
                            <li><code>E</code>のすべての値を合計し、それを8で割った余りを求め、この値を<code>P</code>に追加する。</li>
                            <li>M回だけ時計回りに45&deg;回転する。</li>
                            <li>Iに1を加算する。</li>
                        </ol>
                    </li>
                    <li><code>P[0]</code>を取り出し、<code>P[1]</code>と共に二進数に変換してからXOR演算を行い、八進数の<code>A</code>を作成する。ここで、<code>P[0]</code>はリスト<code>P</code>の最初の値のことである。同様に、<code>P[2]</code>と<code>P[3]</code>っでXOR演算を行い、八進数の<code>B</code>を作る。</li>
                    <li>2回目のクエリの表から<code>A</code>、<code>B</code>の2つの数字を順に結合させ、1つの八進数にした値に対応するセルを見つけ、1回目のクエリの段から該当する色のペアをクエリする。</li>
                </ol>
                <table class="skip bigger centered">
                    <tr><td>0</td><td>1</td><td>7</td><td>3</td><td>5</td><td>4</td><td>2</td><td>6</td></tr>
                    <tr><td>1</td><td>3</td><td>0</td><td>4</td><td>7</td><td>6</td><td>5</td><td>2</td></tr>
                    <tr><td>3</td><td>4</td><td>1</td><td>6</td><td>0</td><td>2</td><td>7</td><td>5</td></tr>
                    <tr><td>4</td><td>6</td><td>3</td><td>2</td><td>1</td><td>5</td><td>0</td><td>7</td></tr>
                    <tr><td>6</td><td>2</td><td>4</td><td>5</td><td>3</td><td>7</td><td>1</td><td>0</td></tr>
                    <tr><td>2</td><td>5</td><td>6</td><td>7</td><td>4</td><td>0</td><td>3</td><td>1</td></tr>
                    <tr><td>5</td><td>7</td><td>2</td><td>0</td><td>6</td><td>1</td><td>4</td><td>3</td></tr>
                    <tr><td>7</td><td>0</td><td>5</td><td>1</td><td>2</td><td>3</td><td>6</td><td>4</td></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 4/5</div>
        </div>
        <div class="page page-bg-cst-storegbra">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">不正虹色矢印</span>
            </div>
            <div class="page-content">
                <h2 class="squeeze" id="submitR">回答の送信</h2>
                <p class="squeeze">回答を送信するには、初期状態でディスプレーに表示された値、この時点までのクエリからのすべての応答、6セットの点滅する矢印のシーケンスを使用する。爆弾に存在するポートを調べ、最も多く出現するポートの種類のリストを作成する。<strong>このリストに、この表に記載されているポートの種類が4つ以上ある場合、1番目、3番目、5番目の点滅を省略する。</strong>そうでない場合、この表のリストにあるポートの種類に対応する点滅を省略する。</p>
                <table class="skip">
                    <tr><th>ポートの種類</th><th>パラレル</th><th>シリアル</th><th>PS/2</th><th>RJ-45</th><th>ステレオRCA</th><th>DVI-D</th></tr>
                    <tr><th>省略する位置</th><td>2番目</td><td>6番目</td><td>3番目</td><td>4番目</td><td>5番目</td><td>1番目</td></tr>
                </table>
                <table class="skip" style="float: right; width: 40%">
                    <tr>
                        <th>色の点滅</th>
                        <th>方程式</th>
                    </tr>
                    <tr>
                        <td>赤</td>
                        <td>R(x) = x + A<sub>0</sub></td>
                    </tr>
                    <tr>
                        <td>オレンジ</td>
                        <td>O(x) + A<sub>1</sub> = x</td>
                    </tr>
                    <tr>
                        <td>黄</td>
                        <td>Y(x) + (2<sup>n</sup> - 1) = A<sub>2</sub> - x</td>
                    </tr>
                    <tr>
                        <td>緑</td>
                        <td>G(x) + x = 2 * x + &sum;A / 3</td>
                    </tr>
                    <tr>
                        <td>青</td>
                        <td>x - 2 * B(x) - 2 * n = min(A) - B(x)</td>
                    </tr>
                    <tr>
                        <td>紫</td>
                        <td>3 * P(x) - 2 * x = max(A) - x + 4 * P(x)</td>
                    </tr>
                </table>
                <p class="squeeze">残りの点滅セットを調べ、点滅した色からそれぞれの方程式を見つける。点滅が反転している場合、xを解く。そうでない場合、F(x)を解く。方程式を解くには、もう一方の変数(F(x)を解く場合はx、xを解く場合はF(x)。その他の値を代入した後に行うこと)に、点滅セットの計算で求められた値、またはこれが最初のセットである場合はディスプレーに表示された値を代入する。<strong>点滅セットを一度計算するごとに、十進数での計算値が0～63の範囲内から外れる場合、64を足すか引くことを繰り返し、計算値を0～63の範囲内にする。また、割り算をするとき、小数点を省略すること。つまり、24.5555は24になる。25ではない。</strong><br>右の表の方程式について、</p>
                <ul>
                    <li>Aは、ここまでに得られた応答のリストである。</li>
                    <li>A<sub>n</sub>は、(n ＋ 1)番目のクエリの応答である。</li>
                    <li>nは、式が使用されるときに残っている点滅セットにおける現在の位置で、最初の点滅セットは0である。</li>
                    <li>min(A) はリストAの最小値である。</li>
                    <li>max(A) はリストAの最大値である。</li>
                    <li>&sum;A はリストAのすべての値の合計である。</li>
                </ul>
                <p>最終的に求めた点滅セットの結果を八進数に変換し、2回目のクエリの表を参照して、新しい値を得る。新しい値から該当する色のペアを1回目のクエリの表から見つけ、回答を送信する。</p>
            </div>
            <div class="page-footer relative-footer">ページ 5/5</div>
        </div>
    </div>
</body>
</html>