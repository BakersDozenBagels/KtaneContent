<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>可否 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        table {
            margin: 1em auto;
        }
    </style>
    <script>
        function setDefaultRules(rnd)
        {
            setRules(rnd);
        }

        function setRules(rnd)
        {
            function makeButtonRules(leftOrRight)
            {
                let colors = ['赤', 'オレンジ', '黄', '緑', '青', 'マゼンタ'];
                let rules = [];

                function makeSingleColorRule()
                {
                    // Rule with a single color
                    let c = rnd.next(0, colors.length);
                    rules.push(`ボタンの色は${colors[c]}`);
                    colors.splice(c, 1);
                }

                function makeTwoColorRule()
                {
                    // Rule with two possible colors
                    let c1 = rnd.next(0, colors.length), color1 = colors[c1];
                    colors.splice(c1, 1);
                    let c2 = rnd.next(0, colors.length);
                    rules.push(`ボタンの色は${color1}か${colors[c2]}のいずれか`);
                    colors.splice(c2, 1);
                };

                makeSingleColorRule();
                makeTwoColorRule();
                if (rnd.next(0, 2) != 0)
                    makeSingleColorRule();
                else
                    makeTwoColorRule();

                // Insert yes/no label rule
                let label = rnd.next(0, 2) != 0 ? 'YES' : 'NO';
                let condition = rnd.next(0, 2) != 0 ? 'ではない' : 'である';
                rules.splice(rnd.next(0, rules.length), 0, [`ボタンのラベルは「${label}」${condition}`]);

                let numbers = [1, 2, 3, 4];
                rnd.shuffleFisherYates(numbers);
                numbers.splice(rnd.next(0, numbers.length), 0, [rnd.next(1, 5)]);

                for (let i = 0; i < 4; i++)
                    document.getElementById(`rule-${leftOrRight}-${i}`).innerHTML = rules[i];
                for (let i = 0; i < 5; i++)
                    document.getElementById(`rule-${leftOrRight}-value-${i}`).innerHTML = numbers[i];
            }

            makeButtonRules('left');
            makeButtonRules('right');
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">可否</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Yes and No.svg" class="diagram">
                <h2>モジュール詳細：可否</h2>
                <p class="flavour-text">「NO」ではなく、「YES」ではない場合、「NO」ではない「YES」を押してはならない。ごめん…なんて？</p>

                <p>このモジュールには、英語の質問文が表示されるディスプレーと、「YES」と「NO」と書かれた2つのボタンがある。質問に正しく答える。</p>

                <h3>操作方法</h3>
                <p>各ボタンを一定回数押すと、機能が入れ替わる。この回数に達すると、ボタンの機能が切り替わり、切り替わった要因となったボタンを押した回数がリセットされる。</p>
                <p>左ボタンが切り替わるのに必要な回数:</p>
                <ul>
                    <li><span class="rule" id="rule-left-0">ボタンの色は青かオレンジのいずれか</span>: <span class="rule" id="rule-left-value-0">1</span></li>
                    <li><span class="rule" id="rule-left-1">ボタンの色は緑かオレンジのいずれか</span>: <span class="rule" id="rule-left-value-1">4</span></li>
                    <li><span class="rule" id="rule-left-2">ボタンの色は黄ではない</span>: <span class="rule" id="rule-left-value-2">1</span></li>
                    <li><span class="rule" id="rule-left-3">ボタンのラベルは「NO」ではない</span>: <span class="rule" id="rule-left-value-3">1</span></li>
                    <li>上記のいずれにも当てはまらない: <span class="rule" id="rule-left-value-4">4</span></li>
                </ul>
                <p>右ボタンが切り替わるのに必要な回数:</p>
                <ul>
                    <li><span class="rule" id="rule-right-0">ボタンの色は緑でも黄でもない</span>: <span class="rule" id="rule-right-value-0">3</span></li>
                    <li><span class="rule" id="rule-right-1">ボタンの色は緑か黄のいずれか</span>: <span class="rule" id="rule-right-value-1">1</span></li>
                    <li><span class="rule" id="rule-right-2">ボタンの色は黄</span>: <span class="rule" id="rule-right-value-2">4</span></li>
                    <li><span class="rule" id="rule-right-3">ボタンの色は緑</span>: <span class="rule" id="rule-right-value-3">4</span></li>
                    <li>上記のいずれにも当てはまらない: <span class="rule" id="rule-right-value-4">4</span></li>
                </ul>
                <p>モジュールの下側にある小さなボタンはリセットボタンである。分からなくなった場合に備え、これを「Reset done(リセット完了)」と表示されるまで長押しすると、モジュールがリセットされる。</p>
                <p>質問に正しく回答すると、上部にあるプログレスバーのLEDが1つずつ点灯する。</p>
                <p>ボタンを押した回数と切り替わった回数は、ミスが記録された時にリセットされる。</p>
            </div>
           <div class="page-footer relative-footer">ページ 1/1</div>
        </div>
    </div>
</body>
</html>