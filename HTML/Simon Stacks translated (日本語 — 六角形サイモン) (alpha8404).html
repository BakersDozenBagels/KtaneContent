<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>六角形サイモン — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <script src="js/Utilities/svg-utils.js"></script>
    <style>
        table {
            margin: 1em auto;
        }
        .tablehex-header {
            height: 0;
            position: relative;
            bottom: 10mm;
        }
        .tablehex-desc {
            height: 0;
            position: relative;
            bottom: 5mm;
        }
        .dark table.hexImages tr td {
            background-color: gray;
        }
        svg.hexagons {
            height: 95px;
            width: 95px;
            fill-rule: evenodd;
        }
        svg.hexagons path {
            stroke: black;
            stroke-width: 5px;
        }
        td svg {
            display: flex;
            justify-content: center;
            align-content: center;
            flex-direction: column;
        }
    </style>
    <script>
        $(function() {
            let hexes = [
                [4,5,8,9,10,13,14],
                [1,3,8,12,17,19],
                [1,2,6,8,9,11,12,14,18,19],
                [1,3,4,5,6,8,10,11,12,13,14,15,17,19],
                [1,2,11,12,13,14],

                [9,10,13,14,15,17,18],
                [2,5,6,8,10,12,14,15,18],
                [1,2,5,10,11,12,13,14,16,17],
                [1,2,3,6,7,10,12,14,17],
                [1,4,5,8,9,10,11,12,13,14,17],

                [10,11,14,15,16,18,19],
                [2,6,9,10,13,15,16],
                [1,2,3,8,9,11,12,17,18,19],
                [2,3,4,8,12,16,17,18],
                [3,5,7,8,10,14,16,19],

                [6,7,10,11,12,15,16],
                [3,4,5,6,7,13,14,15,16,17],
                [6,7,9,11,13,14],
                [5,6,9,10,11,14,15],
                [1,3,5,6,10,14,15,17,19],

                [2,3,5,6,7,10,11],
                [1,2,3,5,7,8,9,10,11,12,14,16,17,18,19],
                [3,6,10,14,17],
                [2,6,8,9,15,18],
                [1,2,3,4,6,7,8,10,12,13,14,16,17,18,19],

                [1,2,4,5,6,9,10],
                [1,2,3,5,8,11,12,14,17,18,19],
                [1,3,5,6,14,15,17,19],
                [2,5,7,8,11,14,17,19],
                [2,3,7,10,13,17,18],

                [1,2,3,4,7,8,12,13,16,17,18,19],
                [3,6,7,10,11,12],
                [5,10,11,14,15],
                [1,2,4,5,7,11,12,13,14,16,17,18],
                [1,7,10,13,19],

                [5,6,9,11,14,15],
                [1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,17,18,19],
                [2,3,6,7,11,12,15,16,18,19],
                [1,3,5,7,9,11,13,15,17,19],
                [2,3,4,7,10,13,16,17,18]
            ];
            let rows = [3,4,5,4,3];
            let rowStart = [47,25,5,25,47];
            let hexSVGs = $(".hexImages tr td");

            for (var h = 0; h < hexes.length; h++) {
                hexSVGs[h].innerHTML = `<svg class='hexagons hex${h}' viewbox='0 0 205 205' xmlns='http://www.w3.org/2000/svg'></svg>`;
                var svg = $(`.hexagons.hex${h}`);
                var i = 1;
                for (var c = 0; c < 5; c++) {
                    for (var r = 0; r < rows[c]; r++) {
                        let x1 = 16 + c*38.5;
                        let y1 = rowStart[c] + r*41;
                        let x2 = 35 + c*38.5;
                        let x3 = 46 + c*38.5;
                        let y3 = rowStart[c] + r*41 + 16;
                        let y4 = rowStart[c] + r*41 + 32;
                        let x6 = 5 + c*38.5;
                        svg.append(MakeSvgElem("path", {
                            d:`M ${x1},${y1}, ${x2},${y1}, ${x3},${y3}, ${x2},${y4}, ${x1},${y4}, ${x6},${y3} z`,
                            fill:(hexes[h].includes(i) ? "black" : "white")
                        }));
                        i++;
                    }
                }
            }
        });
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">六角形サイモン</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Simon Stacks.svg" class="diagram">
                <h2>モジュール詳細：六角形サイモン</h2>
                <p class="flavour-text">心配しないで。それはあなたの税金じゃないよ。</p>

                <p>このモジュールには、六角形を形成する19個の六角形がある。</p>
                <p>以下の3~5ステージの手順に従ってモジュールを解除する。</p>

                <h3>回答取得</h3>
                <ul>
                    <li>いくつかの六角形が点滅し、点滅は単一の色が表示される。</li>
                    <li>モジュールの点滅パターンは、表HEXの「点滅」列の1~8パターンのXOR演算の結果である(ページ2参照)。</li>
                    <li>六角形に表示されている色を列に、「点滅」列と同じ段にあるその列内のセルを取得する。</li>
                    <li>取得した全てのセルのパターンをXOR演算で出力し、解除パターンを取得する。</li>
                </ul>

                <h3>送信</h3>
                <ul>
                    <li>送信を開始するには背景を押す。点滅が停止する。</li>
                    <li>六角形を押して、上記の手順で得られた解除パターンを形成する。</li>
                    <li>最後に背景をもう一度押して、現在のパターンを送信する。送信されたパターンが間違っている場合、ミスが記録される。それ以外の場合、モジュールは次のステージに進む。</li>
                </ul>

                <h3>後続のステージ</h3>
                <ul>
                    <li>前のステージで送信されたパターンから開始する。</li>
                    <li>追加された点滅を使用し、上記の手順を繰り返す。</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">ページ 1/2</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">六角形サイモン</span>
            </div>
            <div class="page-content">
                <h3 class="tablehex-header">表HEX</h3>

                <p class="tablehex-desc">この表では、塗りつぶされた六角形を1、白抜きの六角形を0とする。</p>

                <table class="hexImages">
                    <tr>
                        <th>点滅</th>
                        <th>赤</th>
                        <th>緑</th>
                        <th>青</th>
                        <th>黄</th>
                    </tr>
                    <tr> <td></td><td></td><td></td><td></td><td></td> </tr>
                    <tr> <td></td><td></td><td></td><td></td><td></td> </tr>
                    <tr> <td></td><td></td><td></td><td></td><td></td> </tr>
                    <tr> <td></td><td></td><td></td><td></td><td></td> </tr>
                    <tr> <td></td><td></td><td></td><td></td><td></td> </tr>
                    <tr> <td></td><td></td><td></td><td></td><td></td> </tr>
                    <tr> <td></td><td></td><td></td><td></td><td></td> </tr>
                    <tr> <td></td><td></td><td></td><td></td><td></td> </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 2/2</div>
        </div>
    </div>
</body>
</html>