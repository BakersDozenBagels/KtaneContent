<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Puzzling Buttons — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <script>
        const puzzlePieces = [
            ["00__", "00__3", "00__1", "00__2"],
            ["101_", "101_0h", "101_1h", "101_1"],
            ["", "", "", "0000"],
            ["01__", "01__0v", "01__0h", "01__2"],
            ["100_", "100_0h", "100_0v", "100_2"],
            ["1100", "11001", "11003", "11002"],
            ["1000", "10001", "10002", "10003"],
            ["111_", "111_2", "111_3", "111_1"],
            ["11__", "11__2", "11__3", "11__1"],
            ["01__1", "01__3v", "01__1v", "01__3"],
            ["", "", "1010", "10101"],
            ["1110", "11102", "11101", "11103"],
            ["110_", "110_1", "110_0h", "110_3h"],
            ["010_", "010_3", "010_2", "010_1"],
            ["", "", "", "1111"],
            ["000_", "000_3", "000_2", "000_1"],
            ["110_3", "110_2", "110_3v", "110_2h"],
            ["100_3h", "100_3", "100_1", "100_1h"],
        ];
        const XOs = [
            " O          X ",
            "     O        ",
            "XXXXXXXXXXXXXX",
            "    O O       ",
            "X            O",
            "  O  X     O  ",
            "   O     O    ",
            "       X  O   ",
            "   O   X      ",
            " OX     O     ",
            "         XO   ",
            "O       X     ",
            "       O    O ",
            "    O        O",
            "OOOOOOOOOOOOOO",
            "      O     O ",
            " X            ",
            "   X       O O",
        ];
        $(() => {
            const upper = $(".upper");
            const lower = $(".lower");
            for (let y = 0; y < 18; y++) {
                const chart = y < 14 ? upper : lower;
                const row = $("<tr>").appendTo(chart);
                for (let x = 0; x < 18; x++) {
                    const cell = $("<td>").appendTo(row);
                    if (x < 4 && puzzlePieces[y][x] !== "") {
                        const imageInfo = puzzlePieces[y][x];
                        const image = $("<img>").addClass("invertible").attr("src", `img/Puzzling Buttons/${imageInfo.substring(0, 4)}.svg`).appendTo(cell);
                        const reflection = imageInfo.includes("h") ? "scaleX(-1)" : imageInfo.includes("v") ? "scaleY(-1)" : "";
                        if (imageInfo.length > 4)
                           image.css("transform", `rotate(${parseInt(imageInfo.charAt(4)) * 90}deg) ${reflection}`);
                    }
                    else if (x >= 4 && XOs[y].charAt(x - 4) !== " ")
                        $("<img>").addClass("invertible").attr("src", `img/Puzzling Buttons/${XOs[y].charAt(x - 4)}.svg`).appendTo(cell);
                }
            }
        });
    </script>
    <style>
        .dark table, table {
            margin: 1em;
            border: none;
            font-size: 10px;
            padding: .1em;
        }
        @media screen and (max-width: 900px) {
            .dark table, table { width: 900px; }
        }
        @media screen and (min-width: 900px) {
            .dark table, table {
                width: 110%;
                margin-left: -5%;
            }
        }
        .info {
            font-size: 14px;
        }
        .puzzle-chart tr:first-child th {
            -ms-writing-mode: tb-rl;
            -webkit-writing-mode: vertical-rl;
            writing-mode: vertical-rl;
            white-space: nowrap;
            text-align: center;
        }
        .puzzle-chart td:nth-child(n + 5) {
            width: 5.1%;
            padding: .1em;  
        }
        .page-footer::before { content: "Page "; }
        .page-footer::after { content: " of 2"; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Puzzling Buttons</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Puzzling Buttons.svg" class="diagram">
                <h2>On the Subject of Puzzling Buttons</h2>
                <p class="flavour-text">Who in the world am I? Ah, that's the great puzzle.</p>
                <p class="info">
                    To solve this module you need to light up a full line, horizontal, vertical or diagonal (of at least 5 buttons). If there are no lines that can be completed just light up all the buttons that can be
                    pressed.
                </p>
                <p class="info">A button can be pressed if, in the table below, <b>any</b> of the conditions marked with a checkmark in the row with its symbol are true, and <b>all</b> those marked with a cross are false.</p>
                <table class="upper puzzle-chart">
                    <tr>
                        <th colspan="4" class="corner"></th>
                        <th>5 or more AA<br>batteries</th>
                        <th>Timer has a 2</th>
                        <th>Serial number<br>contains a vowel</th>
                        <th>SIG indicator</th>
                        <th>3 or more ports</th>
                        <th>Timer has a 9</th>
                        <th>Unlit FRK<br>indicator</th>
                        <th>BOB indicator</th>
                        <th>Stereo RCA port</th>
                        <th>Parallel port</th>
                        <th>Timer has a 5</th>
                        <th>2 or fewer<br>D batteries</th>
                        <th>More than<br>1 DVI-D port</th>
                        <th>2 or more<br>lit indicators</th>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">1</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Puzzling Buttons</span>
            </div>
            <div class="page-content">
                <table class="lower puzzle-chart">
                    <tr>
                        <th colspan="4" class="corner"></th>
                        <th>5 or more AA<br>batteries</th>
                        <th>Timer has a 2</th>
                        <th>Serial number<br>contains a vowel</th>
                        <th>SIG indicator</th>
                        <th>3 or more ports</th>
                        <th>Timer has a 9</th>
                        <th>Unlit FRK<br>indicator</th>
                        <th>BOB indicator</th>
                        <th>Stereo RCA port</th>
                        <th>Parallel port</th>
                        <th>Timer has a 5</th>
                        <th>2 or fewer<br>D batteries</th>
                        <th>More than<br>1 DVI-D port</th>
                        <th>2 or more<br>lit indicators</th>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">2</div>
        </div>
    </div>
</body>
</html>