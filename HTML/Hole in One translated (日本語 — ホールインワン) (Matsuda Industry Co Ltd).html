<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>ホールインワン — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <script>
        let RuleOne = [4, 2, 3, 12, 1, 8];
        let RuleTwo = [6, 3, 1, 4, 2, 9];
        let RuleThree = [7, 1, 6, 8, 13, 5];
        let RuleFour = [4, 2, 3, 12, 1, 8];
        let RuleFive = [12, 10, 18, 5, 7, 3];
        let LetterTable = ["V", "W", "F", "R", "T", "E", "U", "X", "D", "I", "O", "M", "P", "B", "Q", "J", "H", "N", "L", "Z", "C", "G", "Y", "A", "S"];
        
        function setDefaultRules() { WriteTable(); }
        
        function setRules(rnd) {
            let ShuffledLetters = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"];
            rnd.shuffleFisherYates(ShuffledLetters);
            for (let x = 0; x < 25; x++)
                LetterTable[x] = ShuffledLetters[x];
            for (let y = 0; y < 6; y++)
                RuleOne[y] = rnd.next(1,21);
            for (let y = 0; y < 6; y++)
                RuleTwo[y] = rnd.next(1,21);
            for (let y = 0; y < 6; y++)
                RuleThree[y] = rnd.next(1,21);
            for (let y = 0; y < 6; y++)
                RuleFour[y] = rnd.next(1,21);
            for (let y = 0; y < 6; y++)
                RuleFive[y] = rnd.next(1,21);
            WriteTable();
        }
        
        function WriteTable() {
            for (let x = 0; x < 6; x++)
                document.getElementsByClassName('row1')[0].getElementsByTagName('td')[x+1].innerHTML = RuleOne[x];
            for (let x = 0; x < 6; x++)
                document.getElementsByClassName('row1')[1].getElementsByTagName('td')[x+1].innerHTML = RuleTwo[x];
            for (let x = 0; x < 6; x++)
                document.getElementsByClassName('row1')[2].getElementsByTagName('td')[x+1].innerHTML = RuleThree[x];
            for (let x = 0; x < 6; x++)
                document.getElementsByClassName('row1')[3].getElementsByTagName('td')[x+1].innerHTML = RuleFour[x];
            for (let x = 0; x < 6; x++)
                document.getElementsByClassName('row1')[4].getElementsByTagName('td')[x+1].innerHTML = RuleFive[x];
            for (let x = 0; x < 25; x++)
                document.getElementsByClassName('row2')[Math.floor(x/5)].getElementsByTagName('td')[x%5].innerHTML = LetterTable[x];
        }
    </script>
    <style>
        .dark table, table {
            margin: 1em auto;
            border: none;
        }
        h1 {
            text-align: center;
        }
        .tab1 td:nth-child(1) {
            font-weight: bold;
            width: 45%;
        }
        .centered-img { width:40%; }
        text.big { font-size: 11px; }
        text.small { font-size: 6px; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">ホールインワン</span>
            </div>
            <div class="page-content">
                <img src="./img/Component/Hole in One.svg" class="diagram">
                <h2>モジュール詳細：ホールインワン</h2>
                <p class="flavour-text">なぜ今、スポーツがモジュールになりつつあるのだろうか？</p>
                <p>モジュールでは、最初にクラブの選択をする。矢印ボタンを押してゴルフクラブを循環して表示される。最初のゴルフクラブの位置はランダムになる。</p>
                <p>正しいクラブを見つけるには、解除済みモジュールの数を列として使い、表1の条件のリストを上から見る。それぞれの条件には数字が書かれている。当てはまったすべての条件の数字を合計し、それを5で割った余りを求める。その結果に1を加える。その結果が選択しなければならないクラブの位置である。表示されたクラブを選択するには、矢印の間にある丸いボタンを押す。選択後、次のステップに進む。</p>
                <p>ゴルフボールの選択画面では、赤緑青の色要素を持つ5つのボールが表示される。それぞれのボールに含まれる原色をまとめる。「赤」が含まれるボールの数を数える。「緑」と「青」も同様に行う。まとめた数字の中に「0」がある場合、それを「1」に変える。全部で3つの数が現れるはずである。その3つの数を掛け合わせる。この数字を5で割った余りを求め、その結果に1を加える。その位置にあるボールを選択する。選択後、次のステップに進む。</p>
                <p>これでホールインワンを狙う準備が整った！そのためには、前の2つのステップで得た両方の数字を使用する。1つ目の数字を列、2つ目の数字を段とし、表2で使用する。得られた英字は次のように解読される: </p>
                <ol>
                    <li>表から得た英字を取り出し、その英字にカエサルシフトを行う。<b>シリアルナンバー</b>の最後の数字が偶数の場合、前方にシフトを行う。そうでない場合、後方にシフトする。<b>表1</b>から得た数字を、シフトの量として使用する。</li>
                    <li>カエサルシフトされた英字を取り出し、Atbash暗号を適用する。</li>
                    <li>英字をアルファベット上の位置の数字に変換する。</li>
                </ol>
                <p>この数字が、ホールインワンに必要なパワー(Power)となる。 <b>パワー(Power)</b>レベルが求めた結果と一致するまで、モジュール中央のボールを押し続ける。</p>
                <p>前の手順のいずれかが間違っていた場合、ホールインワンは得られず、ミスが記録され、最初の状態にリセットされる。</p>
                <p>ホールインワンを達成すると、モジュールは解除される。</p>

            </div>
            <div class="page-footer relative-footer">ページ 1/2</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">ホールインワン</span>
            </div>
            <div class="page-content">
                <h1><u>表 1</u></h1>
                <table class="tab1">
                    <tr><th class="corner"></th><th>0–3</th><th>4–6</th><th>7–9</th><th>10–12</th><th>13–15</th><th>16+</th></tr>
                    <tr class="row1">
                        <td>点灯したインジケーターの数 &gt; 点灯していないインジケーターの数</td>
                        <td></td><td></td><td></td><td></td><td></td><td></td>
                    </tr>
                    <tr class="row1">
                        <td>ポートの数 &gt; バッテリーの数</td>
                        <td></td><td></td><td></td><td></td><td></td><td></td>
                    </tr>
                    <tr class="row1">
                        <td>解除済みモジュールの数を10で割った余りの数がシリアルナンバーにあるいずれかの数字と同じ</td>
                        <td></td><td></td><td></td><td></td><td></td><td></td>
                    </tr>
                    <tr class="row1">
                        <td>シリアルナンバーに母音がある</td>
                        <td></td><td></td><td></td><td></td><td></td><td></td>
                    </tr>
                    <tr class="row1">
                        <td>いずれも当てはまらない</td>
                        <td></td><td></td><td></td><td></td><td></td><td></td>
                    </tr>
                </table>
                <h1><u>表 2</u></h1>
                <table>
                    <tr><th class="corner"></th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr>
                    <tr class="row2"><th>1</th><td></td><td></td><td></td><td></td><td></td></tr>
                    <tr class="row2"><th>2</th><td></td><td></td><td></td><td></td><td></td></tr>
                    <tr class="row2"><th>3</th><td></td><td></td><td></td><td></td><td></td></tr>
                    <tr class="row2"><th>4</th><td></td><td></td><td></td><td></td><td></td></tr>
                    <tr class="row2"><th>5</th><td></td><td></td><td></td><td></td><td></td></tr>
                </table>
                <p class="caption">カラーガイド</p>
                <svg viewbox="0 -5 100 100" text-anchor="middle" class="centered-img">
                    <circle cx="50" cy="29.333" r="29.95" fill="#E84F4F"/>
                    <circle cx="67.898" cy="60.333" r="29.95" fill="#4FE85C"/>
                    <circle cx="32.102" cy="60.333" r="29.95" fill="#4868E8"/>
                    <path d="M20.2 32.795 A30 30 0 0 1 61.902 56.871 A30 30 0 0 1 20.2 32.795" fill="#D04FE7"/>
                    <path d="M79.8 32.795 A30 30 0 0 1 38.098 56.871 A30 30 0 0 1 79.8 32.795" fill="#E8E64F"/>
                    <path d="M50 84.409 A30 30 0 0 1 50 36.257 A30 30 0 0 1 50 84.409" fill="#4FE8D1"/>
                    <path d="M50 36.257 A30 30 0 0 1 61.902 56.871 A30 30 0 0 1 38.098 56.871 A30 30 0 0 1 50 36.257" fill="#F8F4EE"/>
                    <text class="big" x="50" y="18">赤</text>
                    <text class="big" x="20" y="70">青</text>
                    <text class="big" x="80" y="70">緑</text>
                    <text class="small" x="33.5" y="40">マゼンタ</text>
                    <text class="big" x="67" y="44">黄</text>
                    <text class="small" x="50" y="70">シアン</text>
                    <text class="big" x="50" y="53">白</text>
                </svg>
            </div>
            <div class="page-footer relative-footer">ページ 2/2</div>
        </div>
    </div>
</body>
</html>