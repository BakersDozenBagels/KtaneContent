let gl,timeLocation,initialTime;function createAccretionDisk(canvasId){const canvas=document.getElementById(canvasId);if(gl=canvas.getContext("webgl"),!gl)return console.error("Failed to get the rendering context for WebGL"),!1;const vs=document.getElementById("accretion-disk-vertex-shader").innerHTML,fs=document.getElementById("accretion-disk-fragment-shader").innerHTML,vertexShader=makeShader(gl,vs,gl.VERTEX_SHADER);if(!vertexShader)return!1;const fragmentShader=makeShader(gl,fs,gl.FRAGMENT_SHADER);if(!fragmentShader)return!1;const glProgram=gl.createProgram();if(gl.attachShader(glProgram,vertexShader),gl.attachShader(glProgram,fragmentShader),gl.linkProgram(glProgram),!gl.getProgramParameter(glProgram,gl.LINK_STATUS))return console.error("Unable to initialize the shader program"),!1;gl.useProgram(glProgram),gl.program=glProgram;return initVertexBuffers(gl)<0?(console.error("Failed to set the positions of the vertices"),!1):(gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,loadTexture(gl,"img/Supermassive Black Hole/noise_0.png")),gl.uniform1i(gl.getUniformLocation(gl.program,"u_Noise_0"),0),gl.activeTexture(gl.TEXTURE1),gl.bindTexture(gl.TEXTURE_2D,loadTexture(gl,"img/Supermassive Black Hole/noise_1.png")),gl.uniform1i(gl.getUniformLocation(gl.program,"u_Noise_1"),1),gl.activeTexture(gl.TEXTURE2),gl.bindTexture(gl.TEXTURE_2D,loadTexture(gl,"img/Supermassive Black Hole/noise_2.png")),gl.uniform1i(gl.getUniformLocation(gl.program,"u_Noise_2"),2),timeLocation=gl.getUniformLocation(gl.program,"u_Time"),initialTime=Date.now()/1e3,!0)}function makeShader(gl,src,type){const shader=gl.createShader(type);return gl.shaderSource(shader,src),gl.compileShader(shader),gl.getShaderParameter(shader,gl.COMPILE_STATUS)?shader:(console.error("Error compiling shader: "+gl.getShaderInfoLog(shader)),null)}function initVertexBuffers(gl){const verticesCount=initFloat32ArrayAttrib(gl,[-1,1,1,1,1,-1,-1,1,1,-1,-1,-1],"a_Position");return verticesCount!==initFloat32ArrayAttrib(gl,[0,1,1,1,1,0,0,1,1,0,0,0],"a_TextureCoord")?(console.error("Invalid coords count"),-1):verticesCount}function initFloat32ArrayAttrib(gl,data,name){const arr=new Float32Array(data),buffer=gl.createBuffer();if(!buffer)return console.error("Failed to create the buffer object"),-1;gl.bindBuffer(gl.ARRAY_BUFFER,buffer),gl.bufferData(gl.ARRAY_BUFFER,arr,gl.STATIC_DRAW);const attrib=gl.getAttribLocation(gl.program,name);return attrib<0?(console.error(`Failed to get the storage location of ${name}`),-1):(gl.vertexAttribPointer(attrib,2,gl.FLOAT,!1,0,0),gl.enableVertexAttribArray(attrib),data.length/2)}function loadTexture(gl,url){const texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,texture);const internalFormat=gl.RGBA,srcFormat=gl.RGBA,srcType=gl.UNSIGNED_BYTE;gl.texImage2D(gl.TEXTURE_2D,0,internalFormat,1,1,0,srcFormat,srcType,new Uint8Array([0,0,0,255]));const image=new Image;return image.onload=()=>{gl.bindTexture(gl.TEXTURE_2D,texture),gl.texImage2D(gl.TEXTURE_2D,0,internalFormat,srcFormat,srcType,image),gl.generateMipmap(gl.TEXTURE_2D),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.REPEAT),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR_MIPMAP_LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR)},image.src=url,texture}function renderAccretionDisk(){gl.uniform1f(timeLocation,Date.now()/1e3-initialTime),gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT),gl.drawArrays(gl.TRIANGLES,0,6)}